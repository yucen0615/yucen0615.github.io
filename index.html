<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>課業行事曆</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    pre { background: rgba(0,0,0,0.05); padding: 0.75rem; border-radius: .5rem; overflow:auto }
    .card { @apply bg-white shadow-md rounded-2xl p-4 }
    .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 1px; background: #ddd; }
    .calendar-day { background: white; min-height: 80px; padding: 0.25rem; border-radius: 0.5rem; cursor: pointer; }
    .calendar-day .date { font-weight: bold; }
    .event { background: #4f46e5; color: white; font-size: 0.75rem; margin-top: 2px; padding: 1px 3px; border-radius: 3px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
  </style>
</head>
<body class="bg-gradient-to-b from-slate-50 to-white min-h-screen text-slate-800">
  <header class="max-w-5xl mx-auto p-6 flex items-center justify-between">
    <div class="flex items-center gap-4">
      <div class="w-12 h-12 bg-indigo-500 text-white rounded-lg flex items-center justify-center font-bold">課</div>
      <div>
        <h1 class="text-xl font-semibold">課業行事曆</h1>
        <p class="text-sm text-slate-500">課程、作業、提醒與即時範例</p>
      </div>
    </div>
    <nav class="space-x-4 text-sm">
      <a href="#lessons" class="hover:underline">課程</a>
      <a href="#exercise" class="hover:underline">練習</a>
      <a href="#playground" class="hover:underline">試玩</a>
      <a href="#calendar" class="hover:underline">月曆</a>
    </nav>
  </header>

  <main class="max-w-5xl mx-auto p-6 grid gap-6">
    <!-- Hero -->
    <section class="card">
      <h2 class="text-2xl font-bold">開始你的課業行事曆</h2>
      <p class="mt-2 text-slate-600">這是一個單檔範例網站，包含：課程大綱、程式練習題、月曆事件，並可即時新增提醒。</p>
    </section>

    <!-- Calendar -->
    <section id="calendar" class="card">
      <h3 class="text-lg font-semibold">月曆</h3>
      <div class="flex justify-between items-center mt-3 mb-2">
        <button id="prevMonth" class="px-2 py-1 bg-slate-200 rounded">上個月</button>
        <div id="monthLabel" class="font-semibold"></div>
        <button id="nextMonth" class="px-2 py-1 bg-slate-200 rounded">下個月</button>
      </div>
      <div class="calendar-grid" id="calendarGrid"></div>

      <div class="mt-4">
        <h4 class="font-semibold">新增事件</h4>
        <div class="mt-2 space-y-2">
          <input id="eventTitle" type="text" class="w-full p-2 border rounded" placeholder="事件名稱" />
          <input id="eventDate" type="date" class="w-full p-2 border rounded" />
          <button id="addCalendarEvent" class="px-3 py-2 bg-indigo-600 text-white rounded">新增事件</button>
        </div>
      </div>
    </section>
  </main>

  <script>
    const calendarGrid = document.getElementById('calendarGrid');
    const monthLabel = document.getElementById('monthLabel');
    let current = new Date();
    let events = JSON.parse(localStorage.getItem('calendarEvents')||'[]');

    function renderCalendar(date){
      calendarGrid.innerHTML = '';
      const year = date.getFullYear();
      const month = date.getMonth();
      monthLabel.innerText = `${year} 年 ${month+1} 月`;

      const firstDay = new Date(year, month, 1).getDay();
      const lastDate = new Date(year, month+1, 0).getDate();

      for(let i=0;i<firstDay;i++) calendarGrid.appendChild(document.createElement('div'));

      for(let d=1;d<=lastDate;d++){
        const dayDiv = document.createElement('div');
        dayDiv.className='calendar-day';
        dayDiv.innerHTML=`<div class='date'>${d}</div>`;
        const dayEvents = events.filter(e=>e.date===formatDate(new Date(year,month,d)));
        dayEvents.forEach(ev=>{
          const evDiv = document.createElement('div');
          evDiv.className='event';
          evDiv.innerText=ev.title;
          dayDiv.appendChild(evDiv);
        });
        calendarGrid.appendChild(dayDiv);
      }
    }

    function formatDate(d){
      return d.toISOString().split('T')[0];
    }

    document.getElementById('prevMonth').addEventListener('click', ()=>{
      current.setMonth(current.getMonth()-1);
      renderCalendar(current);
    });
    document.getElementById('nextMonth').addEventListener('click', ()=>{
      current.setMonth(current.getMonth()+1);
      renderCalendar(current);
    });

    document.getElementById('addCalendarEvent').addEventListener('click', ()=>{
      const title = document.getElementById('eventTitle').value.trim();
      const date = document.getElementById('eventDate').value;
      if(!title || !date){ alert('請輸入事件名稱與日期'); return; }
      events.push({title,date});
      localStorage.setItem('calendarEvents',JSON.stringify(events));
      renderCalendar(current);
      document.getElementById('eventTitle').value='';
    });

    renderCalendar(current);
  </script>
</body>
</html>
